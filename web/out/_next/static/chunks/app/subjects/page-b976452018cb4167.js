(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{109:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(4294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1190:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(4294).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1631:(e,t,s)=>{"use strict";s.d(t,{z:()=>n});var i=s(5155),a=s(1190),l=s(63),r=s(5016);function n(e){let{title:t,subtitle:s,onBack:n,rightElement:d,className:c}=e,o=(0,l.useRouter)();return(0,i.jsxs)("div",{className:(0,r.cn)("flex items-center justify-between mb-6 gap-4",c),children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("button",{onClick:()=>{n?n():o.back()},className:"p-2 bg-gray-100 rounded-xl text-gray-500 hover:bg-gray-200 active:scale-90 transition-all",children:(0,i.jsx)(a.A,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl font-bold text-gray-800 leading-tight",children:t}),s&&(0,i.jsx)("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:s})]})]}),d&&(0,i.jsx)("div",{children:d})]})}},3262:(e,t,s)=>{Promise.resolve().then(s.bind(s,7898))},3263:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(4294).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3489:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(4294).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},5225:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(4294).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7898:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var i=s(5155),a=s(9294),l=s(5571),r=s(109),n=s(3263),d=s(7187),c=s(5225),o=s(3489),x=s(4294);let u=(0,x.A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var h=s(8274);let p=(0,x.A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var m=s(5016),g=s(1631),b=s(2115),f=s(4824),y=s(8720);function j(){let{t:e}=(0,l.o)(),[t,s]=(0,b.useState)([]),[x,j]=(0,b.useState)(null),[v,k]=(0,b.useState)([]),[N,w]=(0,b.useState)([]),[A,C]=(0,b.useState)(null);(0,b.useEffect)(()=>{let e=f.B.getCurrentUser();if(!e)return;let t=f.B.subscribeLessons({niveau:e.niveau},t=>{let i=t.filter(t=>t.filiere.includes(e.filiere)||0===t.filiere.length);k(i),s(Array.from(new Set(i.map(e=>e.subject))).map((e,t)=>{let s=i.filter(t=>t.subject===e).length;return{id:t,title:e,progress:0,icon:"\uD83D\uDCD6",color:"bg-indigo-500",items:s}}))}),i=f.B.subscribeAssignments({niveau:e.niveau},t=>{w(t.filter(t=>t.filiere.includes(e.filiere)||0===t.filiere.length))});return()=>{t(),i()}},[]);let z=v.filter(e=>e.subject===x),S=N.filter(e=>e.subject===x);return(0,i.jsx)(a.e,{children:(0,i.jsxs)("div",{className:"p-6 pb-24 bg-[#F8FAFC] min-h-full",children:[(0,i.jsx)(g.z,{title:x||e("matieres"),onBack:x?()=>j(null):void 0}),x?(0,i.jsxs)("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-400 mb-4 ml-2",children:"Le\xe7ons & Supports"}),(0,i.jsxs)("div",{className:"space-y-3",children:[z.map(e=>(0,i.jsxs)("div",{className:"bg-white p-4 rounded-[28px] border border-gray-100 shadow-sm flex items-center gap-4",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600",children:(0,i.jsx)(c.A,{size:20})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h4",{className:"font-bold text-xs uppercase tracking-tight",children:e.title}),(0,i.jsx)("p",{className:"text-[10px] text-gray-400 font-medium",children:new Date(e.date).toLocaleDateString()})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:()=>{var t;return(null==(t=e.files)?void 0:t[0])&&f.B.downloadPackFile(e.files[0],e.title,e.id)},className:(0,m.cn)("p-3 rounded-xl transition-all",f.B.isDownloaded(e.id)?"bg-emerald-100 text-emerald-600":"bg-gray-50 text-gray-400"),children:(0,i.jsx)(o.A,{size:16})}),(0,i.jsx)("button",{onClick:()=>{var t;return(null==(t=e.files)?void 0:t[0])&&f.B.openPackFile(e.id,e.files[0])},className:"p-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-100",children:(0,i.jsx)(u,{size:16})})]})]},e.id)),0===z.length&&(0,i.jsx)("p",{className:"text-[10px] font-bold text-gray-300 uppercase ml-4",children:"Pas de le\xe7ons"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-400 mb-4 ml-2",children:"Devoirs \xe0 rendre"}),(0,i.jsxs)("div",{className:"space-y-3",children:[S.map(e=>{var t;return(0,i.jsxs)("div",{className:"bg-white p-5 rounded-[32px] border border-gray-100 shadow-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)("span",{className:"bg-orange-50 text-orange-600 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest",children:["\xc9ch\xe9ance : ",e.deadline]}),(0,i.jsx)(h.A,{size:16,className:"text-orange-400"})]}),(0,i.jsx)("h4",{className:"font-black text-xs uppercase tracking-tight mb-4",children:e.title}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(null==(t=e.files)?void 0:t[0])&&(0,i.jsx)("button",{onClick:()=>f.B.openPackFile(e.id,e.files[0]),className:"flex-1 py-3 bg-gray-50 text-gray-600 rounded-xl text-[9px] font-black uppercase tracking-widest",children:"Consulter"}),(0,i.jsx)("button",{disabled:A===e.id,onClick:()=>{let t=document.createElement("input");t.type="file",t.onchange=async t=>{let s=t.target.files[0];if(!s)return;let i=f.B.getCurrentUser();if(!i)return y.o.error("Veuillez vous reconnecter.");C(e.id);let a=y.o.loading('T\xe9l\xe9versement de "'.concat(s.name,'"...'));try{let t=await f.B.uploadFile(s,"submissions/".concat(e.id,"_").concat(i.id,"_").concat(s.name));await f.B.addSubmission({id:Math.random().toString(36).substr(2,9),assignmentId:e.id,studentId:i.id,studentName:i.fullName,date:new Date().toISOString(),file:t}),y.o.success("Devoir envoy\xe9 avec succ\xe8s !",{id:a})}catch(e){y.o.error("\xc9chec de l'envoi : "+e.message,{id:a})}finally{C(null)}},t.click()},className:(0,m.cn)("flex-1 py-3 bg-indigo-600 text-white rounded-xl text-[9px] font-black uppercase tracking-widest shadow-lg shadow-indigo-100 disabled:opacity-50 disabled:animate-pulse",A===e.id&&"bg-indigo-400"),children:A===e.id?"Envoi...":"D\xe9poser"})]})]},e.id)}),0===S.length&&(0,i.jsx)("p",{className:"text-[10px] font-bold text-gray-300 uppercase ml-4",children:"Pas de devoirs"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-400 mb-4 ml-2",children:"Cours Vid\xe9o"}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,i.jsxs)("div",{className:"bg-white p-4 rounded-[32px] border border-gray-100 shadow-sm opacity-40",children:[(0,i.jsx)("div",{className:"aspect-video bg-gray-100 rounded-2xl mb-3 flex items-center justify-center",children:(0,i.jsx)(p,{size:24,className:"text-gray-300"})}),(0,i.jsx)("p",{className:"text-[10px] font-black uppercase text-center",children:"Bient\xf4t disponible"})]})})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"relative mb-8",children:[(0,i.jsx)(r.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,i.jsx)("input",{type:"text",placeholder:"Rechercher une mati\xe8re...",className:"w-full bg-white border border-gray-100 rounded-2xl py-4 pl-12 pr-4 outline-none text-sm shadow-sm focus:ring-2 ring-indigo-500/10 transition-all"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[t.map(e=>(0,i.jsxs)("div",{onClick:()=>j(e.title),className:"bg-white p-5 rounded-[32px] shadow-sm border border-gray-100 flex items-center gap-4 hover:shadow-md transition-all cursor-pointer group",children:[(0,i.jsx)("div",{className:"w-14 h-14 bg-indigo-50 rounded-2xl flex items-center justify-center text-2xl text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-all",children:e.icon}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h4",{className:"font-black text-gray-900 text-sm uppercase tracking-tight",children:e.title}),(0,i.jsxs)("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest mt-1",children:[e.items," Ressources"]})]}),(0,i.jsx)(n.A,{size:20,className:"text-gray-300"})]},e.id)),0===t.length&&(0,i.jsxs)("div",{className:"text-center py-20 opacity-20",children:[(0,i.jsx)(d.A,{size:48,className:"mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-xs font-black uppercase",children:"Aucune mati\xe8re trouv\xe9e"})]})]})]})]})})}},8274:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(4294).A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])}},e=>{e.O(0,[594,720,909,874,824,294,441,493,358],()=>e(e.s=3262)),_N_E=e.O()}]);