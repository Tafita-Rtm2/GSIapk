(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{1982:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4294).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},2168:(e,a,t)=>{"use strict";t.d(a,{CG:()=>s,mE:()=>l,ov:()=>r,xY:()=>i});let r=["Antananarivo (Analakely)","Tamatave","Antsirabe","Bypass"],l={"Antananarivo (Analakely)":["Tourisme, Voyage & H\xf4tellerie","Communication, Multimedia & Journalisme","Informatique, Electronique & Robotique","Gestion Management des Affaires (Finance & Compta)","Gestion Management des Affaires (Marketing Digital)","Param\xe9dicaux (Sage-femme)","Param\xe9dicaux (Infirmier)"],Tamatave:["Management et Organisation des Affaires","Droit et Relations Internationales","Tourisme, Voyage et H\xf4tellerie","Technologies Informatiques, \xc9lectroniques et T\xe9l\xe9communications","Communication, Multim\xe9dia et Journalisme"],Antsirabe:["Informatique & Conception Web","Gestion & Management RH","Droit & Relations Internationales","Tourisme, Voyage & H\xf4tellerie"],Bypass:["Param\xe9dicaux (Sage-femme)","Param\xe9dicaux (Infirmier)","Aide Soignant"]},s=Array.from(new Set(Object.values(l).flat())).sort(),i=["L1","L2","L3","M1","M2"]},4755:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var r=t(5155),l=t(2115),s=t(63),i=t(9201),n=t(7314),o=t(4294);let c=(0,o.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),d=(0,o.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=t(1982),u=t(9338),x=t(4824),p=t(8720),g=t(2168);function h(){let e=(0,s.useRouter)(),[a,t]=(0,l.useState)(!1),[o,h]=(0,l.useState)({user:"",pass:""}),[f,b]=(0,l.useState)({fullName:"",email:"",password:"",confirmPassword:"",campus:g.ov[0],filiere:g.mE[g.ov[0]][0],niveau:g.xY[0],matricule:"",contact:"",photo:""}),[y,v]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),w=async e=>{e.preventDefault(),v(!0);try{(await fetch("/web/api/admin/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok?(t(!0),p.o.success("Acc\xe8s autoris\xe9")):p.o.error("Identifiants administrateur incorrects")}catch(e){p.o.error("Erreur de connexion au serveur")}finally{v(!1)}},k=async e=>{if(e.preventDefault(),f.password!==f.confirmPassword)return void p.o.error("Les mots de passe ne correspondent pas");v(!0);let a=p.o.loading("Cr\xe9ation du compte \xe9tudiant...");try{let e={id:Math.random().toString(36).substr(2,9),fullName:f.fullName,email:f.email,password:f.password,role:"student",campus:f.campus,filiere:f.filiere,niveau:f.niveau,matricule:f.matricule,contact:f.contact,photo:f.photo};(await fetch("/web/api/admin/create-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({admin:o,student:e})})).ok?(p.o.success("Compte cr\xe9\xe9 avec succ\xe8s !",{id:a}),b({fullName:"",email:"",password:"",confirmPassword:"",campus:g.ov[0],filiere:g.mE[g.ov[0]][0],niveau:g.xY[0],matricule:"",contact:"",photo:""}),N(null)):p.o.error("Erreur lors de la cr\xe9ation du compte.",{id:a})}catch(e){p.o.error("Erreur: "+e.message,{id:a})}finally{v(!1)}};return a?(0,r.jsxs)("div",{className:"flex flex-col min-h-screen max-w-xl mx-auto bg-white p-8",children:[(0,r.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>t(!1),className:"p-2 -ml-2 text-gray-400 hover:text-primary transition-colors",children:(0,r.jsx)(d,{size:24})}),(0,r.jsx)("h1",{className:"text-2xl font-bold ml-2",children:"Cr\xe9er un El\xe8ve"})]}),(0,r.jsxs)("div",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,r.jsx)(i.A,{size:14})," Mode Admin"]})]}),(0,r.jsxs)("form",{onSubmit:k,className:"space-y-5 pb-10",children:[(0,r.jsx)("div",{className:"flex justify-center mb-8",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center border-2 border-dashed border-gray-300 overflow-hidden",children:j?(0,r.jsx)("img",{src:j,alt:"Preview",className:"w-full h-full object-cover"}):(0,r.jsx)(m.A,{size:32,className:"text-gray-400"})}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=async e=>{let a=e.target.files[0];if(a){let e=new FileReader;e.onload=e=>{var a;return N(null==(a=e.target)?void 0:a.result)},e.readAsDataURL(a);let t=await x.B.uploadFile(a,"profiles/".concat(a.name));b({...f,photo:t})}},e.click()},className:"absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full shadow-lg active:scale-90 transition-transform",children:(0,r.jsx)(u.A,{size:16})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Nom Complet"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full bg-gray-50 border-none rounded-2xl p-4 outline-none focus:ring-2 ring-primary/20",placeholder:"Ex: Jean Dupont",value:f.fullName,onChange:e=>b({...f,fullName:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",required:!0,className:"w-full bg-gray-50 border-none rounded-2xl p-4 outline-none focus:ring-2 ring-primary/20",placeholder:"nom@student.gsi.com",value:f.email,onChange:e=>b({...f,email:e.target.value})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Matricule"}),(0,r.jsx)("input",{type:"text",required:!0,className:"w-full bg-gray-50 border-none rounded-2xl p-4 outline-none focus:ring-2 ring-primary/20",placeholder:"123456",value:f.matricule,onChange:e=>b({...f,matricule:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Contact"}),(0,r.jsx)("input",{type:"tel",required:!0,className:"w-full bg-gray-50 border-none rounded-2xl p-4 outline-none focus:ring-2 ring-primary/20",placeholder:"034 XX XXX XX",value:f.contact,onChange:e=>b({...f,contact:e.target.value})})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Mot de passe"}),(0,r.jsx)("input",{type:"password",required:!0,minLength:8,className:"w-full bg-gray-50 border-none rounded-2xl p-4 outline-none focus:ring-2 ring-primary/20",placeholder:"••••••••",value:f.password,onChange:e=>b({...f,password:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Confirmation"}),(0,r.jsx)("input",{type:"password",required:!0,className:"w-full bg-gray-50 border-none rounded-2xl p-4 outline-none focus:ring-2 ring-primary/20",placeholder:"••••••••",value:f.confirmPassword,onChange:e=>b({...f,confirmPassword:e.target.value})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Campus"}),(0,r.jsx)("select",{className:"w-full bg-gray-50 border-none rounded-2xl p-4 outline-none focus:ring-2 ring-primary/20 appearance-none",value:f.campus,onChange:e=>{let a=e.target.value;b({...f,campus:a,filiere:g.mE[a][0]})},children:g.ov.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Fili\xe8re"}),(0,r.jsx)("select",{className:"w-full bg-gray-50 border-none rounded-2xl p-4 outline-none focus:ring-2 ring-primary/20 appearance-none",value:f.filiere,onChange:e=>b({...f,filiere:e.target.value}),children:g.mE[f.campus].map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Niveau"}),(0,r.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:g.xY.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>b({...f,niveau:e}),className:"px-4 py-2 rounded-xl font-bold text-sm transition-all ".concat(f.niveau===e?"bg-primary text-white shadow-lg shadow-primary/30":"bg-gray-50 text-gray-500 hover:bg-gray-100"),children:e},e))})]})]})]}),(0,r.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-primary text-white py-5 rounded-2xl font-bold shadow-lg shadow-primary/30 hover:scale-[1.02] active:scale-[0.98] transition-all mt-6 disabled:opacity-50",children:y?"Cr\xe9ation...":"Enregistrer l'Etudiant"})]})]}):(0,r.jsx)("div",{className:"flex flex-col min-h-screen items-center justify-center bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-3xl shadow-xl p-8",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-indigo-100 text-indigo-600 rounded-2xl flex items-center justify-center mb-4",children:(0,r.jsx)(i.A,{size:32})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Acc\xe8s Admin"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm text-center mt-2",children:"Veuillez entrer les identifiants pour cr\xe9er un compte \xe9l\xe8ve"})]}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.A,{className:"absolute left-4 top-4 text-gray-400",size:20}),(0,r.jsx)("input",{type:"text",placeholder:"Nom d'utilisateur",className:"w-full bg-gray-50 border border-gray-100 rounded-2xl p-4 pl-12 outline-none focus:ring-2 ring-indigo-500/20",value:o.user,onChange:e=>h({...o,user:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c,{className:"absolute left-4 top-4 text-gray-400",size:20}),(0,r.jsx)("input",{type:"password",placeholder:"Mot de passe",className:"w-full bg-gray-50 border border-gray-100 rounded-2xl p-4 pl-12 outline-none focus:ring-2 ring-indigo-500/20",value:o.pass,onChange:e=>h({...o,pass:e.target.value}),required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-all disabled:opacity-50",children:y?"V\xe9rification...":"Se connecter"})]}),(0,r.jsx)("button",{onClick:()=>e.push("/login"),className:"w-full mt-4 text-gray-400 text-sm font-medium hover:text-indigo-600 transition-colors",children:"Retour au login"})]})})}},7314:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4294).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8877:(e,a,t)=>{Promise.resolve().then(t.bind(t,4755))},9201:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4294).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9338:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(4294).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])}},e=>{e.O(0,[594,720,824,441,493,358],()=>e(e.s=8877)),_N_E=e.O()}]);