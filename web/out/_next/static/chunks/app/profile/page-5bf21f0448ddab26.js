(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{928:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(5155),r=t(9294),l=t(3063),i=t(5320),c=t(1982),n=t(8274),o=t(2322),d=t(4374),x=t(2593),m=t(8428),p=t(6615),u=t(639),h=t(7940),g=t(9201),b=t(3263),f=t(5016),j=t(2115),v=t(2834),N=t(63),w=t(2619),y=t.n(w),k=t(5571),z=t(4824),A=t(8720);function C(){let{t:e,language:s,setLanguage:t}=(0,k.o)(),b=(0,N.useRouter)(),[w,C]=(0,j.useState)(!1),[B,_]=(0,j.useState)(null),[P,S]=(0,j.useState)(!1),[M,U]=(0,j.useState)(!1),[I,D]=(0,j.useState)(0);return((0,j.useEffect)(()=>{let e=z.B.getCurrentUser();e?_(e):b.push("/login")},[b]),B)?(0,a.jsxs)(r.e,{children:[(0,a.jsxs)("div",{className:"bg-primary pt-12 pb-24 px-6 rounded-b-[40px] relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:e("mon_profil")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>S(!P),className:(0,f.cn)("p-2 rounded-lg text-white transition-colors",P?"bg-accent":"bg-white/20"),children:(0,a.jsx)(l.A,{size:20})}),(0,a.jsx)("button",{onClick:()=>C(!0),className:"bg-white/20 p-2 rounded-lg text-white",children:(0,a.jsx)(i.A,{size:20})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full border-4 border-white overflow-hidden shadow-lg bg-white/20 flex items-center justify-center",children:(0,a.jsx)("img",{src:z.B.getMediaUrl(B.photo)||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(B.fullName),alt:"Profile",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(B.fullName)}})}),P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{id:"photo-upload",type:"file",className:"hidden",accept:"image/*",onChange:async e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t&&B){let e=A.o.loading("Mise \xe0 jour de la photo...");D(0);try{U(!0);let s=URL.createObjectURL(t);_({...B,photo:s});let a=await z.B.uploadFile(t,"profiles/".concat(B.id,"_").concat(Date.now()),e=>{D(Math.round(e))}),r={...B,photo:a};await z.B.updateUser(r),_(r),A.o.success("Photo mise \xe0 jour avec succ\xe8s !",{id:e})}catch(s){A.o.error("Erreur: "+s.message,{id:e}),_(z.B.getCurrentUser())}finally{U(!1),D(0)}}}}),(0,a.jsx)("button",{onClick:()=>{var e;return null==(e=document.getElementById("photo-upload"))?void 0:e.click()},disabled:M,className:"absolute bottom-0 right-0 bg-accent text-white p-2 rounded-full shadow-lg active:scale-95 transition-transform disabled:opacity-50",children:(0,a.jsx)(c.A,{size:14})})]})]}),P?(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)("input",{type:"text",defaultValue:B.fullName,onBlur:async e=>{let s={...B,fullName:e.target.value};await z.B.updateUser(s),_(s)},className:"bg-white/20 border-none rounded-xl px-4 py-1 text-center font-bold text-white outline-none focus:ring-1 ring-white/50"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:B.fullName}),(0,a.jsxs)("p",{className:"text-white/70 text-sm font-medium",children:[B.filiere," • ",B.niveau," • ",B.campus]})]})]})]}),(0,a.jsxs)("div",{className:"px-6 -mt-16 pb-32",children:[(0,a.jsxs)("div",{className:"bg-white rounded-[32px] p-6 shadow-xl mb-6 grid grid-cols-2 gap-4",children:[(0,a.jsxs)(y(),{href:"/performance",className:"flex flex-col items-center p-4 bg-gray-50 rounded-2xl hover:bg-indigo-50 transition-colors active:scale-95",children:[(0,a.jsx)(n.A,{className:"text-primary mb-2",size:24}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:e("reussites")})]}),(0,a.jsxs)(y(),{href:"/services",className:"flex flex-col items-center p-4 bg-gray-50 rounded-2xl hover:bg-violet-50 transition-colors active:scale-95",children:[(0,a.jsx)(o.A,{className:"text-accent mb-2",size:24}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:e("demandes")})]})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-8",children:[(0,a.jsx)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-400 px-2 mb-4",children:"Espace Personnel"}),(0,a.jsx)(y(),{href:"/performance",children:(0,a.jsx)(E,{icon:d.A,label:"Mes Notes & Performance",color:"text-indigo-500"})}),(0,a.jsx)(y(),{href:"/program",children:(0,a.jsx)(E,{icon:x.A,label:"Mon Programme d'\xe9tude",color:"text-emerald-500"})}),(0,a.jsx)(y(),{href:"/services",children:(0,a.jsx)(E,{icon:o.A,label:"Documents Administratifs",color:"text-orange-500"})}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-800 rounded-[40px] p-7 text-white mb-6 mt-6 shadow-xl relative overflow-hidden group",children:[(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h4",{className:"font-black text-lg uppercase tracking-tight",children:"Espace \xc9tudiant"}),(0,a.jsx)(n.A,{size:24})]}),(0,a.jsx)("p",{className:"text-xs font-medium opacity-90 mb-4",children:"Acc\xe9dez \xe0 vos ressources p\xe9dagogiques et discutez avec vos camarades."}),(0,a.jsx)(y(),{href:"/community",className:"inline-block bg-white text-indigo-600 px-6 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest active:scale-95 transition-transform",children:"Acc\xe9der au Chat"})]}),(0,a.jsx)("div",{className:"absolute right-[-10px] bottom-[-10px] w-24 h-24 bg-white/10 rounded-full blur-2xl"})]}),(0,a.jsxs)("div",{className:"p-6 bg-gray-50 rounded-[32px] border border-gray-100 mt-4",children:[(0,a.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-4 ml-2",children:"Pr\xe9f\xe9rences Langue"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>t("fr"),className:(0,f.cn)("flex-1 py-2 rounded-xl text-xs font-bold transition-all","fr"===s?"bg-primary text-white":"bg-white text-gray-500"),children:"Fran\xe7ais"}),(0,a.jsx)("button",{onClick:()=>t("en"),className:(0,f.cn)("flex-1 py-2 rounded-xl text-xs font-bold transition-all","en"===s?"bg-primary text-white":"bg-white text-gray-500"),children:"English"})]})]}),(0,a.jsx)(E,{icon:l.A,label:"Param\xe8tres Avanc\xe9s",color:"text-gray-400"})]}),(0,a.jsxs)("button",{onClick:()=>{z.B.logout(),A.o.success("D\xe9connexion r\xe9ussie"),b.push("/login")},className:"w-full flex items-center justify-center gap-3 py-5 text-red-500 font-black uppercase tracking-widest bg-red-50 rounded-[28px] mb-12 active:scale-95 transition-all border border-red-100 shadow-sm",children:[(0,a.jsx)(m.A,{size:20}),(0,a.jsx)("span",{children:"D\xe9connexion du compte"})]})]}),w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 backdrop-blur-md animate-in fade-in duration-300",children:(0,a.jsxs)("div",{className:"bg-white rounded-[48px] w-full max-w-sm overflow-hidden shadow-2xl relative animate-in zoom-in-95 duration-300",children:[(0,a.jsxs)("div",{className:"bg-primary p-8 text-white relative",children:[(0,a.jsx)("button",{onClick:()=>C(!1),className:"absolute top-6 right-6 p-2 bg-white/10 hover:bg-white/20 rounded-2xl text-white transition-colors",children:(0,a.jsx)(p.A,{size:20})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center p-2",children:(0,a.jsx)("img",{src:"/logo.png",alt:"GSI",className:"w-full h-full object-contain",onError:e=>e.currentTarget.src="https://groupegsi.mg/favicon.ico"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-black uppercase tracking-tighter",children:"Carte \xc9tudiant"}),(0,a.jsx)("p",{className:"text-[10px] font-bold opacity-60 uppercase tracking-[0.2em]",children:"Groupe GSI Internationale"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-2xl border-2 border-white/30 overflow-hidden shadow-lg bg-white/10",children:(0,a.jsx)("img",{src:z.B.getMediaUrl(B.photo)||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(B.fullName),className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(B.fullName)}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-black text-sm uppercase leading-none mb-1",children:B.fullName}),(0,a.jsx)("p",{className:"text-[9px] font-black text-accent uppercase tracking-widest",children:B.matricule||"MAT-PENDING"})]})]})]}),(0,a.jsxs)("div",{className:"p-10 flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"absolute -inset-4 bg-primary/5 rounded-[40px] blur-xl opacity-0 group-hover:opacity-100 transition-opacity"}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-[40px] shadow-[0_0_50px_rgba(63,81,181,0.1)] border border-gray-100 relative z-10",children:(0,a.jsx)(v.X,{value:z.B.getStudentQrData(B),size:200,level:"H",includeMargin:!1,imageSettings:{src:"https://groupegsi.mg/favicon.ico",x:void 0,y:void 0,height:40,width:40,excavate:!0}})})]}),(0,a.jsxs)("div",{className:"mt-8 w-full space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-[10px] font-bold text-gray-500 uppercase px-4 py-2 bg-gray-50 rounded-2xl",children:[(0,a.jsx)(u.A,{size:14,className:"text-primary"}),(0,a.jsxs)("span",{children:["Campus: ",B.campus]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-[10px] font-bold text-gray-500 uppercase px-4 py-2 bg-gray-50 rounded-2xl",children:[(0,a.jsx)(h.A,{size:14,className:"text-primary"}),(0,a.jsxs)("span",{children:[B.filiere," — ",B.niveau]})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex items-center gap-2 text-[9px] font-black text-emerald-600 uppercase tracking-widest bg-emerald-50 px-6 py-2 rounded-full border border-emerald-100",children:[(0,a.jsx)(g.A,{size:12}),(0,a.jsx)("span",{children:"Identit\xe9 V\xe9rifi\xe9e par GSI Cloud"})]}),(0,a.jsx)("p",{className:"mt-6 text-center text-[8px] text-gray-400 font-bold uppercase tracking-widest leading-loose max-w-[200px]",children:"Pr\xe9sentez ce code pour la validation de pr\xe9sence ou l'acc\xe8s aux services."})]}),(0,a.jsx)("div",{className:"h-2 bg-primary w-full"})]})})]}):null}function E(e){let{icon:s,label:t,color:r}=e;return(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors rounded-2xl border border-transparent hover:border-gray-100 active:scale-[0.98]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:(0,f.cn)("w-10 h-10 rounded-xl flex items-center justify-center bg-gray-100",r),children:(0,a.jsx)(s,{size:20})}),(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:t})]}),(0,a.jsx)(b.A,{size:20,className:"text-gray-400"})]})}},5800:(e,s,t)=>{Promise.resolve().then(t.bind(t,928))}},e=>{e.O(0,[594,720,909,874,672,824,294,441,493,358],()=>e(e.s=5800)),_N_E=e.O()}]);