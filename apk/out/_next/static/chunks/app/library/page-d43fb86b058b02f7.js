(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{5225:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},5866:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},10919:(e,t,s)=>{Promise.resolve().then(s.bind(s,94650))},50984:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},53489:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},90109:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},94650:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(95155),r=s(96149),i=s(52910),l=s(50984),o=s(5866),n=s(14294);let c=(0,n.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var d=s(90109);let u=(0,n.A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var x=s(62593);let p=(0,n.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var h=s(5225),m=s(53489),g=s(77187),v=s(64269),b=s(12115),y=s(68497),f=s(18720);function j(){let{t:e}=(0,i.o)(),[t,s]=(0,b.useState)("all"),[n,j]=(0,b.useState)(""),[w,N]=(0,b.useState)([]),[C,A]=(0,b.useState)(!0),[M,z]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{let e=y.B.getCurrentUser(),t=y.B.getCache("library_books");t&&(N(t),A(!1));let s=(t,s)=>{let a=[...t.filter(t=>!e||"admin"===e.role||t.niveau===e.niveau&&(t.filiere.includes(e.filiere)||0===t.filiere.length)&&(t.campus.includes(e.campus)||0===t.campus.length)).map(e=>{var t;return{id:e.id,title:e.title,author:"Cours: ".concat(e.subject),type:"Le\xe7on",url:(null==(t=e.files)?void 0:t[0])||"",favorite:!1,downloaded:y.B.isDownloaded(e.id)}}),...s.filter(t=>!e||"admin"===e.role||t.niveau===e.niveau&&(t.filiere.includes(e.filiere)||0===t.filiere.length)&&(t.campus.includes(e.campus)||0===t.campus.length)).map(e=>{var t;return{id:e.id,title:e.title,author:"Devoir: ".concat(e.subject),type:"Devoir",url:(null==(t=e.files)?void 0:t[0])||"",favorite:!1,downloaded:y.B.isDownloaded(e.id)}})];N(a),y.B.setCache("library_books",a),A(!1)},a=[],r=[],i=y.B.subscribeLessons({niveau:null==e?void 0:e.niveau},e=>{s(a=e,r)}),l=y.B.subscribeAssignments({niveau:null==e?void 0:e.niveau},e=>{s(a,r=e)});return()=>{i(),l()}},[]),(0,a.jsx)(r.e,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:e("biblio")}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest flex items-center gap-1",children:[(0,a.jsx)(l.A,{size:10,className:"text-green-500"})," Mode Hors-Ligne Actif"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{z(!0),setTimeout(()=>{z(!1),f.o.success("Biblioth\xe8que synchronis\xe9e")},1500)},className:(0,v.cn)("bg-gray-100 p-2 rounded-xl text-gray-500",M&&"animate-spin"),children:(0,a.jsx)(o.A,{size:20})}),(0,a.jsx)("button",{className:"bg-gray-100 p-2 rounded-xl text-gray-500",children:(0,a.jsx)(c,{size:20})})]})]}),(0,a.jsxs)("div",{className:"relative mb-8",children:[(0,a.jsx)(d.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher un cours ou devoir...",value:n,onChange:e=>j(e.target.value),className:"w-full bg-gray-100 rounded-2xl py-3 pl-12 pr-4 outline-none text-sm focus:ring-2 ring-primary/20 transition-all"})]}),(0,a.jsxs)("div",{className:"flex gap-4 overflow-x-auto pb-4 mb-6 scrollbar-hide",children:[(0,a.jsx)(k,{label:"Tous",active:"all"===t,onClick:()=>s("all")}),(0,a.jsx)(k,{label:"Favoris",icon:u,active:"fav"===t,onClick:()=>s("fav")}),(0,a.jsx)(k,{label:"Cours",active:"cours"===t,onClick:()=>s("cours")}),(0,a.jsx)(k,{label:"Devoirs",active:"devoir"===t,onClick:()=>s("devoir")}),(0,a.jsx)(k,{label:"R\xe9cents",icon:x.A,active:"recent"===t,onClick:()=>s("recent")})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-700 rounded-[40px] p-8 text-white mb-8 relative overflow-hidden shadow-xl",children:[(0,a.jsx)("div",{className:"absolute right-[-20px] bottom-[-20px] w-40 h-40 bg-white/10 rounded-full blur-3xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("span",{className:"bg-white/20 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider mb-4 inline-block",children:"Suggestion IA"}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Guide de R\xe9ussite GSI"}),(0,a.jsx)("p",{className:"text-xs opacity-80 mb-6 leading-relaxed",children:"Bas\xe9 sur vos cours r\xe9cents de Math\xe9matiques et Physique, nous vous recommandons ce support sp\xe9cial."}),(0,a.jsxs)("button",{className:"bg-white text-indigo-600 px-6 py-2.5 rounded-2xl text-xs font-bold flex items-center gap-2",children:["Lire maintenant",(0,a.jsx)(p,{size:14})]})]})]}),(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"cours"===t?"Mes Cours":"devoir"===t?"Mes Devoirs":"Mes documents"}),(0,a.jsxs)("div",{className:"space-y-4",children:[w.filter(e=>"fav"===t?e.favorite:"cours"===t?"Le\xe7on"===e.type:"devoir"===t?"Devoir"===e.type:"recent"!==t||y.B.getProgress(e.id)).filter(e=>e.title.toLowerCase().includes(n.toLowerCase())||e.author.toLowerCase().includes(n.toLowerCase())).map(e=>(0,a.jsxs)("div",{onClick:()=>{e.url&&(y.B.saveProgress(e.id,{lastOpened:Date.now()}),y.B.openPackFile(e.id,e.url))},className:"bg-white p-4 rounded-3xl border border-gray-100 flex items-center gap-4 hover:border-primary/20 transition-all group cursor-pointer",children:[(0,a.jsx)("div",{className:"w-12 h-16 bg-gray-50 rounded-xl flex items-center justify-center border border-gray-100 group-hover:bg-primary/5 transition-colors",children:(0,a.jsx)(h.A,{className:"text-primary opacity-40",size:24})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-bold text-gray-800 text-sm line-clamp-1",children:e.title}),e.downloaded&&(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]"})]}),(0,a.jsx)("p",{className:"text-[10px] text-gray-400 font-medium",children:e.author}),y.B.getProgress(e.id)&&(0,a.jsxs)("span",{className:"text-[8px] text-indigo-500 font-bold uppercase tracking-tighter",children:["Lu le ",new Date(y.B.getProgress(e.id).ts).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,N(w.map(e=>e.id===s?{...e,favorite:!e.favorite}:e))},className:(0,v.cn)("p-2 rounded-xl transition-colors",e.favorite?"text-accent bg-accent/10":"text-gray-300 bg-gray-50"),children:(0,a.jsx)(u,{size:16,fill:e.favorite?"currentColor":"none"})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),((e,t,s)=>{if(!e)return f.o.error("Pas de fichier joint.");f.o.promise(y.B.downloadPackFile(e,s,t),{loading:'T\xe9l\xe9chargement de "'.concat(s,'"...'),success:e=>(N(e=>e.map(e=>e.id===t?{...e,downloaded:!0}:e)),"Document enregistr\xe9 hors-ligne !"),error:e=>"\xc9chec: ".concat(e.message||"Erreur inconnue")})})(e.url,e.id,e.title)},className:(0,v.cn)("p-2 rounded-xl transition-colors",e.downloaded?"bg-green-100 text-green-600":"bg-gray-50 text-primary hover:bg-primary/10"),children:(0,a.jsx)(m.A,{size:16})})]})]},e.id)),0===w.length&&!C&&(0,a.jsxs)("div",{className:"text-center py-10 text-gray-400",children:[(0,a.jsx)(g.A,{size:40,className:"mx-auto mb-3 opacity-20"}),(0,a.jsx)("p",{className:"text-sm",children:"Aucun document publi\xe9 pour votre niveau."})]})]})]})})}let k=(0,b.memo)(e=>{let{label:t,icon:s,active:r,onClick:i}=e;return(0,a.jsxs)("button",{onClick:i,className:(0,v.cn)("px-6 py-3 rounded-2xl text-xs font-bold flex items-center gap-2 whitespace-nowrap transition-all",r?"bg-primary text-white shadow-lg shadow-primary/20 scale-105":"bg-white text-gray-500 border border-gray-100"),children:[s&&(0,a.jsx)(s,{size:14}),t]})})}},e=>{e.O(0,[233,909,619,598,497,530,441,493,358],()=>e(e.s=10919)),_N_E=e.O()}]);