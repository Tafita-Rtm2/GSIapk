(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{10639:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},13630:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},32265:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},34818:(e,s,t)=>{"use strict";t.d(s,{z:()=>c});var a=t(95155),r=t(51190),i=t(20063),l=t(64269);function c(e){let{title:s,subtitle:t,onBack:c,rightElement:n,className:d}=e,o=(0,i.useRouter)();return(0,a.jsxs)("div",{className:(0,l.cn)("flex items-center justify-between mb-6 gap-4",d),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>{c?c():o.back()},className:"p-2 bg-gray-100 rounded-xl text-gray-500 hover:bg-gray-200 active:scale-90 transition-all",children:(0,a.jsx)(r.A,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-800 leading-tight",children:s}),t&&(0,a.jsx)("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:t})]})]}),n&&(0,a.jsx)("div",{children:n})]})}},51190:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},61533:(e,s,t)=>{Promise.resolve().then(t.bind(t,84433))},84433:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(95155),r=t(96149),i=t(52910),l=t(10639),c=t(27314),n=t(28127),d=t(32265),o=t(62593),x=t(13630),p=t(12115),m=t(64269),u=t(68497),h=t(34818),g=t(18720);function b(){var e;let{t:s}=(0,i.o)(),[t,b]=(0,p.useState)("Lundi"),[f,j]=(0,p.useState)(null),[y,N]=(0,p.useState)([]),[v,w]=(0,p.useState)("day"),k=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];(0,p.useEffect)(()=>{let e=u.B.getCurrentUser();if(e)if("professor"===e.role){let s=u.B.subscribeLatestSchedule("","",s=>{let t=[];Object.values(s).forEach(s=>{s.slots&&s.slots.forEach(a=>{a.instructor&&(a.instructor.toLowerCase().includes(e.fullName.toLowerCase())||e.fullName.toLowerCase().includes(a.instructor.toLowerCase()))&&t.push({...a,campusInfo:"".concat(s.campus," ").concat(s.niveau)})})}),j({id:"prof",campus:"Tous",niveau:"Tous",lastUpdated:new Date().toISOString(),slots:t})});return()=>s()}else{let s=[u.B.subscribeLatestSchedule(e.campus,e.niveau,e=>{f&&JSON.stringify(e)!==JSON.stringify(f)&&g.o.info("L'emploi du temps a \xe9t\xe9 mis \xe0 jour par l'administration."),j(e)}),u.B.subscribeReminders(e=>N(e.filter(e=>e.isAlarm)))];return()=>s.forEach(e=>e())}},[f]);let A=(null==f||null==(e=f.slots)?void 0:e.filter(e=>e.day===t))||[],C=e=>{let s=e.split("").reduce((e,s)=>e+s.charCodeAt(0),0),t=["bg-indigo-600","bg-emerald-600","bg-orange-600","bg-rose-600","bg-violet-600","bg-sky-600"];return t[s%t.length]};return(0,a.jsx)(r.e,{children:(0,a.jsxs)("div",{className:"p-6 pb-24 bg-[#F8FAFC] min-h-full",children:[(0,a.jsx)(h.z,{title:s("planning")}),(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-6 scrollbar-hide",children:k.map(e=>(0,a.jsx)("button",{onClick:()=>b(e),className:(0,m.cn)("px-6 py-3 rounded-2xl text-xs font-black uppercase tracking-widest transition-all whitespace-nowrap",t===e?"bg-indigo-600 text-white shadow-lg shadow-indigo-100 scale-105":"bg-white text-gray-400 border border-gray-100"),children:e},e))}),(0,a.jsxs)("div",{className:"flex bg-white/50 p-1 rounded-2xl mb-6 border border-gray-100 self-center max-w-fit mx-auto",children:[(0,a.jsx)("button",{onClick:()=>w("day"),className:(0,m.cn)("px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all","day"===v?"bg-white text-primary shadow-sm":"text-gray-400"),children:"Jour"}),(0,a.jsx)("button",{onClick:()=>w("week"),className:(0,m.cn)("px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all","week"===v?"bg-white text-primary shadow-sm":"text-gray-400"),children:"Semaine"})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-12",children:["day"===v?A.sort((e,s)=>e.startTime.localeCompare(s.startTime)).map((e,s)=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-sm flex gap-6 relative overflow-hidden group hover:shadow-md transition-all",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center border-r border-gray-100 pr-6 min-w-[80px]",children:[(0,a.jsx)("span",{className:"text-sm font-black text-gray-900",children:e.startTime}),(0,a.jsx)("div",{className:"w-0.5 h-4 bg-gray-100 my-1"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-gray-400",children:e.endTime})]}),(0,a.jsxs)("div",{className:"flex-1 py-1",children:[(0,a.jsx)("h3",{className:"font-black text-sm text-gray-900 uppercase tracking-tight mb-2",children:e.subject}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(l.A,{size:12,className:"text-indigo-500"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-gray-500",children:e.room})]}),e.campusInfo&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(l.A,{size:12,className:"text-orange-500"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-orange-600 uppercase",children:e.campusInfo})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(c.A,{size:12,className:"text-gray-400"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-gray-500 truncate max-w-[100px]",children:e.instructor})]})]})]}),(0,a.jsx)("div",{className:(0,m.cn)("absolute right-0 top-0 bottom-0 w-1.5 transition-opacity",C(e.subject))})]},s)):(0,a.jsx)("div",{className:"space-y-6",children:k.map(e=>{var s;let t=(null==f||null==(s=f.slots)?void 0:s.filter(s=>s.day===e))||[];return 0===t.length?null:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-[10px] font-black uppercase text-gray-400 px-2 tracking-[0.2em]",children:e}),t.sort((e,s)=>e.startTime.localeCompare(s.startTime)).map((e,s)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] font-black uppercase text-gray-800",children:e.subject}),(0,a.jsxs)("p",{className:"text-[9px] font-bold text-gray-400",children:[e.startTime," â€” ",e.room]})]}),(0,a.jsx)("div",{className:(0,m.cn)("w-2 h-2 rounded-full",C(e.subject))})]},s))]},e)})}),0===A.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 opacity-20",children:[(0,a.jsx)(n.A,{size:64,className:"mb-4"}),(0,a.jsx)("p",{className:"font-black uppercase text-xs tracking-widest",children:"Aucun cours pr\xe9vu"})]})]}),(0,a.jsxs)("div",{className:"space-y-6 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest text-indigo-600",children:"Mon Programme Personnel"}),(0,a.jsx)("button",{onClick:()=>{let e=prompt("Titre de votre session d'\xe9tude :"),s=prompt("Heure (HH:mm) :","18:00"),t=prompt("Mati\xe8re :");e&&s&&t&&(u.B.addReminder({id:Math.random().toString(36).substr(2,9),title:e,date:new Date().toISOString().split("T")[0],time:s,subject:t,completed:!1,isAlarm:!0}),g.o.success("Programme ajout\xe9 avec alarme !"))},className:"p-2 bg-indigo-600 text-white rounded-xl active:scale-90 transition-all shadow-lg shadow-indigo-100",children:(0,a.jsx)(d.A,{size:20})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[y.map(e=>(0,a.jsxs)("div",{className:"bg-indigo-50/50 p-5 rounded-[28px] border border-indigo-100 flex items-center gap-4 group animate-in slide-in-from-bottom-2",children:[(0,a.jsxs)("div",{className:"w-12 h-12 bg-white rounded-2xl flex flex-col items-center justify-center shadow-sm text-indigo-600",children:[(0,a.jsx)(o.A,{size:16}),(0,a.jsx)("span",{className:"text-[8px] font-black mt-1",children:e.time})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-xs font-black uppercase text-indigo-900",children:e.subject}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-indigo-400",children:e.title})]}),(0,a.jsx)("button",{onClick:()=>u.B.deleteReminder(e.id),className:"p-2 text-rose-400 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(x.A,{size:16})})]},e.id)),0===y.length&&(0,a.jsx)("div",{className:"p-8 border-2 border-dashed border-gray-100 rounded-[32px] text-center",children:(0,a.jsx)("p",{className:"text-[10px] font-black text-gray-300 uppercase",children:"Aucun programme personnel"})})]})]}),f&&(0,a.jsxs)("p",{className:"text-center text-[8px] font-black text-gray-300 uppercase tracking-[0.2em] mt-12",children:["Derni\xe8re mise \xe0 jour : ",new Date(f.lastUpdated).toLocaleString()]})]})})}}},e=>{e.O(0,[233,909,619,598,497,530,441,493,358],()=>e(e.s=61533)),_N_E=e.O()}]);