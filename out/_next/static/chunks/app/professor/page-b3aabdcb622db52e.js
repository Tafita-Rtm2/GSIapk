(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{38272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(95155),l=s(12115),r=s(14294);let n=(0,r.A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),i=(0,r.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=s(50984),d=s(90644),c=s(47940),u=s(98428),x=s(77187),p=s(5225);let m=(0,r.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var h=s(1272);let g=(0,r.A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var b=s(43633),f=s(6943),v=s(13630),y=s(85584),j=s(52910),N=s(20063),w=s(68497),k=s(18720),S=s(34818),C=s(64269),A=s(26549),B=s(4246);function M(){let{t:e}=(0,j.o)(),t=(0,N.useRouter)(),[s,r]=(0,l.useState)("dashboard"),[M,E]=(0,l.useState)([]),[z,L]=(0,l.useState)([]),[I,D]=(0,l.useState)([]),[F,P]=(0,l.useState)([]),[T,_]=(0,l.useState)([]),[q,G]=(0,l.useState)(!1),[V,O]=(0,l.useState)(0),[R,U]=(0,l.useState)("syncing"),[W,Y]=(0,l.useState)(""),[H,J]=(0,l.useState)(""),[Z,K]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=w.B.getCurrentUser();if(!e||"professor"!==e.role)return void t.replace("/login");let s=[w.B.subscribeUsers(e=>{E(e.filter(e=>"student"===e.role)),U("ready")}),w.B.subscribeLessons({},e=>L(e)),w.B.subscribeAssignments({},e=>D(e)),w.B.subscribeSubmissions(void 0,e=>P(e)),w.B.subscribeAnnouncements(e=>_(e))],a=()=>U("offline"),l=()=>U("syncing");return window.addEventListener("offline",a),window.addEventListener("online",l),()=>{s.forEach(e=>e()),window.removeEventListener("offline",a),window.removeEventListener("online",l)}},[t]);let[Q,X]=(0,l.useState)([]),[$,ee]=(0,l.useState)([]),et=async e=>{e.preventDefault();let t=e.target.title.value,s=e.target.message.value,a=e.target.niveau.value;await w.B.addAnnouncement({id:Math.random().toString(36).substr(2,9),title:t,message:s,date:new Date().toISOString(),author:"Professeur",campus:$,filiere:Q,niveau:"Tous"===a?void 0:a}),k.o.success("Annonce envoy\xe9e \xe0 vos classes !"),e.target.reset(),r("dashboard")},es=async e=>{if(e.preventDefault(),0===Q.length||0===$.length)return void k.o.error("Fili\xe8re et campus obligatoires.");let t=e.target,s=t.elements.namedItem("files"),a=null==s?void 0:s.files,l=t.title.value,n=Math.random().toString(36).substr(2,9);G(!0),r("dashboard");let i=k.o.loading("Publication lanc\xe9e...");(async()=>{try{let e=[];a&&a.length>0&&(e=await Promise.all(Array.from(a).map(e=>w.B.uploadFile(e,"lessons/".concat(n,"_").concat(e.name),O)))),await w.B.addLesson({id:n,title:l,description:t.description.value,subject:t.subject.value,niveau:t.niveau.value,filiere:Q,campus:$,date:new Date().toISOString(),files:e}),k.o.success('Le\xe7on "'.concat(l,'" pr\xeate !'),{id:i})}catch(e){k.o.error("Erreur Cloud : "+e.message,{id:i})}finally{G(!1),O(0)}})()},ea=async e=>{e.preventDefault();let t=e.target,s=t.elements.namedItem("files"),a=null==s?void 0:s.files,l=t.title.value,n=Math.random().toString(36).substr(2,9);G(!0),r("dashboard");let i=k.o.loading("Publication du devoir...");(async()=>{try{let e=[];a&&a.length>0&&(e=await Promise.all(Array.from(a).map(e=>w.B.uploadFile(e,"assignments/".concat(n,"_").concat(e.name),O)))),await w.B.addAssignment({id:n,title:l,description:t.description.value,subject:t.subject.value,niveau:t.niveau.value,filiere:Q,campus:$,deadline:t.deadline.value,timeLimit:"23:59",maxScore:20,files:e}),k.o.success('Devoir "'.concat(l,'" disponible.'),{id:i})}catch(e){k.o.error(e.message,{id:i})}finally{G(!1),O(0)}})()};return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen max-w-md mx-auto bg-[#F8FAFC] pb-20",children:[(0===$.length||0===Q.length)&&"dashboard"===s&&(0,a.jsxs)("div",{className:"bg-orange-50 p-4 border-b border-orange-100 flex items-center gap-3 animate-pulse",children:[(0,a.jsx)(n,{size:18,className:"text-orange-500"}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-orange-700 uppercase tracking-tight",children:"Veuillez s\xe9lectionner votre campus et mati\xe8re pour publier"})]}),(0,a.jsx)("div",{className:(0,C.cn)("px-6 py-2 flex items-center justify-between text-[10px] font-bold uppercase tracking-widest","ready"===R?"bg-emerald-500 text-white":"offline"===R?"bg-orange-500 text-white":"bg-violet-600 text-white animate-pulse"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[q?(0,a.jsx)(i,{size:12,className:"animate-spin"}):"ready"===R?(0,a.jsx)(o.A,{size:12}):(0,a.jsx)(d.A,{size:12}),(0,a.jsx)("span",{children:q?"Envoi en cours ".concat(Math.round(V),"%"):"ready"===R?"GSI Cloud : Connect\xe9":"Hors-ligne"})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-b-[40px] shadow-sm mb-6 border-b border-violet-100",children:(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-violet-600 rounded-2xl flex items-center justify-center text-white shadow-lg",children:(0,a.jsx)(c.A,{size:28})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Prof Portal"}),(0,a.jsx)("p",{className:"text-[10px] text-gray-400 font-black uppercase",children:"GSI Internationale"})]})]}),(0,a.jsx)("button",{onClick:()=>{w.B.logout(),k.o.success("D\xe9connexion"),t.replace("/login")},className:"p-3 bg-gray-50 rounded-xl text-gray-400 active:scale-90",children:(0,a.jsx)(u.A,{size:20})})]})}),(0,a.jsxs)("div",{className:"px-6 space-y-8 flex-1 pb-10",children:["dashboard"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[32px] border border-violet-100 shadow-sm space-y-4",children:[(0,a.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-widest text-violet-600",children:"Votre Section Actuelle"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:A.ov.map(e=>(0,a.jsx)("button",{onClick:()=>$.includes(e)?ee($.filter(t=>t!==e)):ee([...$,e]),className:(0,C.cn)("p-2 rounded-xl text-[10px] font-bold transition-all",$.includes(e)?"bg-violet-600 text-white":"bg-gray-50 text-gray-400 border border-gray-100"),children:e},e))}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto p-2 bg-gray-50 rounded-2xl border border-gray-100",children:A.CG.map(e=>(0,a.jsx)("button",{onClick:()=>Q.includes(e)?X(Q.filter(t=>t!==e)):X([...Q,e]),className:(0,C.cn)("px-3 py-1.5 rounded-lg text-[9px] font-bold transition-all",Q.includes(e)?"bg-indigo-600 text-white":"bg-white text-gray-400 border border-gray-100"),children:e},e))})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{id:"lessons",icon:x.A,label:"Publier Le\xe7on",color:"bg-emerald-500"},{id:"assignments",icon:p.A,label:"Publier Devoir",color:"bg-orange-500"},{id:"submissions",icon:m,label:"Devoirs Re\xe7us",color:"bg-blue-500"},{id:"grades",icon:h.A,label:"Notes",color:"bg-pink-500"},{id:"schedule",icon:g,label:"Mon Planning",color:"bg-violet-600"},{id:"announcements",icon:b.A,label:"Annonce",color:"bg-orange-600"},{id:"media",icon:x.A,label:"M\xe9diath\xe8que",color:"bg-emerald-600"},{id:"students",icon:f.A,label:"\xc9tudiants",color:"bg-indigo-500"}].map(e=>(0,a.jsxs)("button",{onClick:()=>{if(("lessons"===e.id||"assignments"===e.id||"announcements"===e.id)&&(0===$.length||0===Q.length))return k.o.error("Veuillez d'abord s\xe9lectionner un campus et une fili\xe8re.");r(e.id)},className:"bg-white p-5 rounded-[32px] shadow-sm border border-gray-100 flex flex-col items-center gap-3 active:scale-95",children:[(0,a.jsx)("div",{className:"".concat(e.color," w-12 h-12 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-black/5"),children:(0,a.jsx)(e.icon,{size:24})}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-tight",children:e.label})]},e.id))})]}),("lessons"===s||"assignments"===s)&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(S.z,{title:"lessons"===s?"Publier Le\xe7on":"Publier Devoir",onBack:()=>r("dashboard")}),(0,a.jsxs)("form",{onSubmit:"lessons"===s?es:ea,className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-xl space-y-4",children:[(0,a.jsx)("input",{name:"subject",required:!0,className:"w-full bg-gray-50 rounded-2xl p-4 text-sm font-bold outline-none",placeholder:"Mati\xe8re"}),(0,a.jsx)("input",{name:"title",required:!0,className:"w-full bg-gray-50 rounded-2xl p-4 text-sm font-bold outline-none",placeholder:"Titre"}),(0,a.jsx)("textarea",{name:"description",required:!0,className:"w-full bg-gray-50 rounded-2xl p-4 text-sm font-bold outline-none min-h-[100px]",placeholder:"Description"}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-2xl space-y-3",children:[(0,a.jsx)("p",{className:"text-[10px] font-black uppercase text-gray-400",children:"Ciblage (Fili\xe8res)"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:A.CG.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-bold",children:[(0,a.jsx)("input",{type:"checkbox",checked:Q.includes(e),onChange:t=>t.target.checked?X([...Q,e]):X(Q.filter(t=>t!==e))})," ",e]},e))})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:A.ov.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>$.includes(e)?ee($.filter(t=>t!==e)):ee([...$,e]),className:(0,C.cn)("p-2 rounded-xl text-[10px] font-bold transition-all",$.includes(e)?"bg-violet-600 text-white":"bg-gray-100 text-gray-400"),children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("select",{name:"niveau",className:"flex-1 p-4 bg-gray-50 rounded-2xl font-bold text-xs",children:A.xY.map(e=>(0,a.jsx)("option",{children:e},e))}),"assignments"===s&&(0,a.jsx)("input",{name:"deadline",type:"date",required:!0,className:"flex-1 p-4 bg-gray-50 rounded-2xl font-bold text-xs"})]}),(0,a.jsx)("input",{name:"files",type:"file",multiple:!0,className:"w-full p-2 text-[10px]"}),(0,a.jsx)("button",{type:"submit",disabled:q,className:"w-full bg-violet-600 text-white py-5 rounded-2xl font-black uppercase shadow-lg active:scale-95",children:"Publier Maintenant"})]}),(0,a.jsxs)("div",{className:"space-y-3 mt-8",children:[(0,a.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest text-gray-400 px-2",children:"lessons"===s?"Vos Le\xe7ons":"Vos Devoirs"}),("lessons"===s?z:I).map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 flex items-center justify-between shadow-sm group",children:[(0,a.jsxs)("div",{className:"flex-1 pr-4",children:[(0,a.jsx)("h4",{className:"font-bold text-[11px] uppercase mb-1 group-hover:text-violet-600 transition-colors",children:e.title}),(0,a.jsxs)("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:[e.subject," • ",e.niveau]})]}),(0,a.jsx)("button",{onClick:async()=>{confirm("Supprimer cet \xe9l\xe9ment ?")&&("lessons"===s?await w.B.deleteLesson(e.id):await w.B.deleteAssignment(e.id),k.o.success("Supprim\xe9"))},className:"p-2 text-red-400 hover:text-red-600 bg-red-50 rounded-xl transition-all active:scale-90",children:(0,a.jsx)(v.A,{size:16})})]},t)),0===("lessons"===s?z:I).length&&(0,a.jsx)("p",{className:"text-center py-10 text-[10px] font-bold text-gray-300 uppercase italic",children:"Aucun contenu publi\xe9"})]})]}),"schedule"===s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(S.z,{title:"Mon Emploi du Temps",onBack:()=>r("dashboard")}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[32px] border border-violet-100 shadow-xl space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-bold",children:"Import planning"}),(0,a.jsxs)("button",{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".xlsx, .xls, .csv",e.onchange=e=>{let t=e.target.files[0];if(!t)return;let s=new FileReader;s.onload=e=>{var t;let s=null==(t=e.target)?void 0:t.result,a=B.LF(s,{type:"binary"}),l=a.SheetNames[0],r=a.Sheets[l],n=B.Wp.sheet_to_json(r);k.o.success("".concat(n.length," cr\xe9neaux d\xe9tect\xe9s. Enregistrement en cours..."));let i=prompt("Campus (ex: Antananarivo) ?",A.ov[0]),o=prompt("Niveau (ex: L1) ?","L1");if(i&&o){let e=n.map(e=>{var t;let s={};return Object.keys(e).forEach(t=>{s[t.toLowerCase().replace(/\s/g,"")]=e[t]}),{day:s.jour||s.day||"Lundi",startTime:s.debut||s.start||"08:00",endTime:s.fin||s.end||"10:00",subject:s.matiere||s.subject||"Cours",room:s.salle||s.room||"-",instructor:(null==(t=w.B.getCurrentUser())?void 0:t.fullName)||"-"}});w.B.addSchedule({id:Math.random().toString(36).substr(2,9),campus:i,niveau:o,lastUpdated:new Date().toISOString(),slots:e}),k.o.success("Planning mis \xe0 jour !")}},s.readAsBinaryString(t)},e.click()},className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-50 text-emerald-600 border border-emerald-100 rounded-xl text-[10px] font-black uppercase active:scale-95 transition-all",children:[(0,a.jsx)(y.A,{size:14}),"Import Excel"]})]}),(0,a.jsx)("p",{className:"text-[10px] text-gray-400 font-medium leading-relaxed italic",children:'Astuce: Importez un fichier Excel avec les colonnes "Jour", "Debut", "Fin", "Matiere", "Salle" pour mettre \xe0 jour l\'emploi du temps des \xe9tudiants.'})]})]}),"grades"===s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(S.z,{title:"Saisie des Notes",onBack:()=>r("dashboard")}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-xl space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-bold",children:"Grille de saisie"}),(0,a.jsxs)("button",{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".xlsx, .xls, .csv",e.onchange=e=>{let t=e.target.files[0];if(!t)return;let s=new FileReader;s.onload=e=>{var t;let s=null==(t=e.target)?void 0:t.result,a=B.LF(s,{type:"binary"}),l=a.SheetNames[0],r=a.Sheets[l],n=B.Wp.sheet_to_json(r),i=0;n.forEach(e=>{let t=e.Nom||e.Name||e.Student||e.Etudiant,s=e.Matricule||e.ID,a=e.Note||e.Grade||e.Score,l=e.Matiere||e.Subject,r=M.find(e=>t&&e.fullName.toLowerCase().includes(t.toString().toLowerCase())||s&&e.matricule===s.toString());if(r&&void 0!==a){let e=document.getElementById("grade-".concat(r.id));if(e&&(e.value=a.toString()),l){let e=document.getElementById("grade-subject");e&&(e.value=l.toString())}i++}}),k.o.success("".concat(i," notes import\xe9es avec succ\xe8s !"))},s.readAsBinaryString(t)},e.click()},className:"flex items-center gap-1 text-[10px] font-bold text-emerald-600 bg-emerald-50 px-3 py-1.5 rounded-lg border border-emerald-100 active:scale-95 transition-all",children:[(0,a.jsx)(y.A,{size:14}),"Import Excel"]})]}),(0,a.jsx)("input",{id:"grade-subject",className:"w-full bg-gray-50 rounded-2xl p-4 text-sm font-bold",placeholder:"Mati\xe8re de l'examen"}),(0,a.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2",children:M.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[(0,a.jsx)("span",{className:"text-xs font-bold",children:e.fullName}),(0,a.jsx)("input",{id:"grade-".concat(e.id),type:"number",className:"w-12 p-2 rounded-lg text-center font-bold",placeholder:"-",max:"20"})]},e.id))}),(0,a.jsx)("button",{onClick:async()=>{let e=document.getElementById("grade-subject").value;if(!e)return k.o.error("Mati\xe8re requise");let t=k.o.loading("Enregistrement...");for(let t of M){let s=document.getElementById("grade-".concat(t.id)).value;s&&await w.B.addGrade({id:Math.random().toString(36).substr(2,9),studentId:t.id,studentName:t.fullName,subject:e,score:parseFloat(s),maxScore:20,date:new Date().toISOString().split("T")[0],niveau:t.niveau,filiere:t.filiere})}k.o.success("Notes publi\xe9es !",{id:t}),r("dashboard")},className:"w-full bg-pink-500 text-white py-4 rounded-xl font-bold active:scale-95",children:"Valider la classe"})]})]}),"announcements"===s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(S.z,{title:"Envoyer une Annonce",onBack:()=>r("dashboard")}),(0,a.jsxs)("form",{onSubmit:et,className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-xl space-y-4",children:[(0,a.jsx)("input",{name:"title",required:!0,className:"w-full bg-gray-50 rounded-2xl p-4 text-sm font-bold outline-none",placeholder:"Titre de l'annonce"}),(0,a.jsx)("textarea",{name:"message",required:!0,className:"w-full bg-gray-50 rounded-2xl p-4 text-sm font-bold outline-none min-h-[100px]",placeholder:"Votre message aux \xe9tudiants..."}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-2xl space-y-3",children:[(0,a.jsx)("p",{className:"text-[10px] font-black uppercase text-gray-400",children:"Ciblage (Fili\xe8res)"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:A.CG.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-bold",children:[(0,a.jsx)("input",{type:"checkbox",checked:Q.includes(e),onChange:t=>t.target.checked?X([...Q,e]):X(Q.filter(t=>t!==e))})," ",e]},e))})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:A.ov.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>$.includes(e)?ee($.filter(t=>t!==e)):ee([...$,e]),className:(0,C.cn)("p-2 rounded-xl text-[10px] font-bold transition-all",$.includes(e)?"bg-violet-600 text-white":"bg-gray-100 text-gray-400"),children:e},e))}),(0,a.jsxs)("select",{name:"niveau",className:"w-full p-4 bg-gray-50 rounded-2xl font-bold text-xs",children:[(0,a.jsx)("option",{children:"Tous"}),A.xY.map(e=>(0,a.jsx)("option",{children:e},e))]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-orange-600 text-white py-5 rounded-2xl font-black uppercase shadow-lg active:scale-95",children:"Envoyer aux \xc9tudiants"})]})]}),"media"===s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(S.z,{title:"M\xe9diath\xe8que",onBack:()=>r("dashboard")}),(0,a.jsx)("div",{className:"bg-white rounded-[32px] overflow-hidden border border-gray-100 shadow-sm h-[600px]",children:(0,a.jsx)("iframe",{src:"https://groupegsi.mg/rtmggmg/embed/gallery?category=application",width:"100%",height:"100%",frameBorder:"0"})})]}),"students"===s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(S.z,{title:"Mes \xc9tudiants",onBack:()=>r("dashboard")}),M.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-3xl border border-gray-100 flex items-center gap-4 shadow-sm",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-50 rounded-full flex items-center justify-center font-bold text-indigo-600 overflow-hidden",children:e.photo?(0,a.jsx)("img",{src:w.B.getAbsoluteUrl(e.photo),className:"w-full h-full object-cover",onError:t=>{t.currentTarget.src="https://api.dicebear.com/7.x/initials/svg?seed=".concat(e.fullName)}}):e.fullName.charAt(0)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-bold text-sm",children:e.fullName}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:[e.filiere," • ",e.niveau]})]})]},t))]}),"submissions"===s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(S.z,{title:"Devoirs Re\xe7us",onBack:()=>r("dashboard")}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-3xl border border-gray-100 shadow-sm space-y-3",children:[(0,a.jsx)("p",{className:"text-[10px] font-black uppercase text-gray-400",children:"Filtrer les rendus"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("select",{value:W,onChange:e=>Y(e.target.value),className:"p-3 bg-gray-50 rounded-xl text-[10px] font-bold outline-none",children:[(0,a.jsx)("option",{value:"",children:"Tous les Campus"}),A.ov.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:Z,onChange:e=>K(e.target.value),className:"p-3 bg-gray-50 rounded-xl text-[10px] font-bold outline-none",children:[(0,a.jsx)("option",{value:"",children:"Tous les Niveaux"}),A.xY.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("select",{value:H,onChange:e=>J(e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl text-[10px] font-bold outline-none",children:[(0,a.jsx)("option",{value:"",children:"Toutes les Fili\xe8res"}),A.CG.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[F.filter(e=>{let t=M.find(t=>t.id===e.studentId);return(!W||(null==t?void 0:t.campus)===W)&&(!H||(null==t?void 0:t.filiere)===H)&&(!Z||(null==t?void 0:t.niveau)===Z)}).map((e,t)=>{let s=I.find(t=>t.id===e.assignmentId);return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-sm space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-black text-xs uppercase text-indigo-600 mb-1",children:e.studentName}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:(null==s?void 0:s.title)||"Devoir Inconnu"})]}),(0,a.jsx)("span",{className:"text-[9px] font-black text-gray-300 uppercase",children:new Date(e.date).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{e.file.startsWith("http")||e.file.startsWith("/")||e.file.startsWith("files/")?w.B.openPackFile(e.id,e.file):alert("Travail \xe9crit : \n\n".concat(e.file))},className:"flex-1 bg-gray-50 py-3 rounded-xl text-[10px] font-black uppercase flex items-center justify-center gap-2",children:[(0,a.jsx)(p.A,{size:14})," Voir le travail"]}),(0,a.jsx)("button",{onClick:()=>{var t;let s=prompt("Note (sur 20) :",(null==(t=e.score)?void 0:t.toString())||"");if(null!==s&&""!==s){let t=parseFloat(s);if(isNaN(t))return k.o.error("Note invalide");let a=prompt("Commentaire pour l'\xe9l\xe8ve :",e.feedback||"");w.B.updateSubmission({...e,score:t,feedback:a||void 0}),k.o.success("Note et commentaire envoy\xe9s !")}},className:(0,C.cn)("px-4 py-3 rounded-xl text-[10px] font-black uppercase flex-1 transition-all",void 0!==e.score?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-indigo-600 text-white shadow-lg shadow-indigo-100"),children:void 0!==e.score?"Note: ".concat(e.score,"/20"):"Noter"})]}),e.feedback&&(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[(0,a.jsx)("p",{className:"text-[8px] font-black uppercase text-gray-400 mb-1",children:"Votre commentaire :"}),(0,a.jsxs)("p",{className:"text-[10px] font-medium text-gray-600 italic",children:['"',e.feedback,'"']})]})]},t)}),0===F.length&&(0,a.jsx)("p",{className:"text-center py-20 text-[10px] font-bold text-gray-300 uppercase italic",children:"Aucun devoir rendu pour le moment"})]})]})]})]})}},85076:(e,t,s)=>{Promise.resolve().then(s.bind(s,38272))}},e=>{e.O(0,[524,233,909,497,149,441,493,358],()=>e(e.s=85076)),_N_E=e.O()}]);