(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5866:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},19201:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},22080:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>I});var a=t(95155),l=t(12115),r=t(19201),i=t(6943),n=t(5225),d=t(43633),o=t(47940),c=t(5866),x=t(77187),u=t(14294);let p=(0,u.A)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);var m=t(1272),h=t(50984),g=t(90644),b=t(98428),f=t(90109);let j=(0,u.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var v=t(13630),y=t(94374),N=t(26615),w=t(32265),k=t(85584),C=t(52910),A=t(20063),S=t(68497),z=t(18720),L=t(34818),M=t(64269),B=t(4246),E=t(26549);function I(){let{t:e}=(0,C.o)(),s=(0,A.useRouter)(),[t,u]=(0,l.useState)("dashboard"),[k,B]=(0,l.useState)([]),[I,_]=(0,l.useState)(null),[O,P]=(0,l.useState)(null),[G,F]=(0,l.useState)(!1),[U,R]=(0,l.useState)([]),[V,W]=(0,l.useState)([]),[H,J]=(0,l.useState)([]),[K,X]=(0,l.useState)([]),[Q,Y]=(0,l.useState)([]),[Z,$]=(0,l.useState)(""),[ee,es]=(0,l.useState)(""),[et,ea]=(0,l.useState)("syncing"),[el,er]=(0,l.useState)(""),[ei,en]=(0,l.useState)(""),[ed,eo]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=S.B.getCurrentUser();if(!e||"admin"!==e.role)return void s.push("/login");let t=[S.B.subscribeUsers(e=>{B(e),ea("ready")}),S.B.subscribeLessons({},e=>R(e)),S.B.subscribeAssignments({},e=>W(e)),S.B.subscribeSubmissions(void 0,e=>Y(e)),S.B.subscribeAnnouncements(e=>J(e)),S.B.subscribeLatestSchedule("","",()=>{X(Object.values(S.B.getCache("schedules")||{}))})],a=()=>ea("offline"),l=()=>ea("syncing");return window.addEventListener("offline",a),window.addEventListener("online",l),()=>{t.forEach(e=>e()),window.removeEventListener("offline",a),window.removeEventListener("online",l)}},[s]);let ec=async e=>{confirm("Supprimer cet utilisateur ?")&&(await S.B.deleteUser(e),z.o.success("Demande de suppression envoy\xe9e."))},[ex,eu]=(0,l.useState)([]),[ep,em]=(0,l.useState)([]),eh=async e=>{e.preventDefault();let s=e.target.title.value,t=e.target.message.value,a=e.target.niveau.value;await S.B.addAnnouncement({id:Math.random().toString(36).substr(2,9),title:s,message:t,date:new Date().toISOString(),author:"Administration",campus:ep,filiere:ex,niveau:"Tous"===a?void 0:a}),z.o.success("Annonce diffus\xe9e aux profils cibl\xe9s !"),e.target.reset(),eu([]),em([]),u("dashboard")},eg=k.filter(e=>(e.fullName||"").toLowerCase().includes(Z.toLowerCase())||(e.email||"").toLowerCase().includes(Z.toLowerCase())),eb=[{id:"dashboard",icon:r.A,label:e("dashboard"),color:"bg-indigo-600"},{id:"users",icon:i.A,label:e("gestion_utilisateurs"),color:"bg-blue-600"},{id:"submissions",icon:n.A,label:"Devoirs Re\xe7us",color:"bg-emerald-600"},{id:"communication",icon:d.A,label:e("communication"),color:"bg-orange-600"},{id:"academic",icon:o.A,label:e("gestion_academique"),color:"bg-purple-600"},{id:"schedule",icon:c.A,label:"Emploi du temps",color:"bg-violet-600"},{id:"media",icon:x.A,label:"M\xe9diath\xe8que",color:"bg-sky-600"},{id:"ai_config",icon:p,label:"IA Config",color:"bg-black"},{id:"stats",icon:m.A,label:e("stats_rapports"),color:"bg-pink-600"}];return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen max-w-md mx-auto bg-gray-50 pb-20",children:[(0,a.jsx)("div",{className:(0,M.cn)("px-6 py-2 flex items-center justify-between text-[10px] font-bold uppercase tracking-widest transition-all","ready"===et?"bg-emerald-500 text-white":"offline"===et?"bg-orange-500 text-white":"bg-indigo-600 text-white animate-pulse"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["ready"===et?(0,a.jsx)(h.A,{size:12}):"offline"===et?(0,a.jsx)(g.A,{size:12}):(0,a.jsx)(c.A,{size:12,className:"animate-spin"}),(0,a.jsx)("span",{children:"ready"===et?"GSI Cloud : Connect\xe9":"offline"===et?"Mode Hors-ligne":"Synchronisation..."})]})}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-b-[40px] shadow-sm mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-indigo-600 rounded-[22px] flex items-center justify-center text-white shadow-xl shadow-indigo-100/50 border border-indigo-50 rotate-[-3deg]",children:(0,a.jsx)(r.A,{size:32})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-xl font-black tracking-tight leading-none text-gray-900",children:["Admin ",(0,a.jsx)("span",{className:"text-indigo-600",children:"Portal"})]}),(0,a.jsx)("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest mt-1",children:"Nina GSI — Principal"})]})]}),(0,a.jsx)("button",{onClick:()=>{S.B.logout(),z.o.success("D\xe9connexion"),s.push("/login")},className:"p-3 bg-gray-50 rounded-xl text-gray-400 hover:text-red-500 transition-colors active:scale-90",children:(0,a.jsx)(b.A,{size:20})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"text",placeholder:e("rechercher")+"...",value:Z,onChange:e=>$(e.target.value),className:"w-full bg-gray-50 border-none rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 ring-indigo-500/20"})]})]}),(0,a.jsxs)("div",{className:"px-6 space-y-8 flex-1 pb-10",children:["dashboard"===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,a.jsx)(D,{label:"\xc9tudiants Actifs",value:k.filter(e=>"student"===e.role).length.toString(),change:"+12% ce mois",color:"text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-4",children:e("tous")}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:eb.filter(e=>"dashboard"!==e.id).map(e=>(0,a.jsxs)("button",{onClick:()=>u(e.id),className:"bg-white p-5 rounded-[32px] shadow-sm border border-gray-100 flex flex-col items-center text-center gap-3 hover:shadow-md transition-all active:scale-95",children:[(0,a.jsx)("div",{className:"".concat(e.color," w-12 h-12 rounded-2xl flex items-center justify-center text-white shadow-lg"),children:(0,a.jsx)(e.icon,{size:24})}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-700 leading-tight",children:e.label})]},e.id))})]})]}),"users"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(L.z,{title:e("gestion_utilisateurs"),onBack:()=>u("dashboard")}),(0,a.jsx)("div",{className:"space-y-3",children:eg.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 flex items-center gap-4 shadow-sm hover:border-indigo-200 transition-all cursor-pointer group",onClick:()=>P(e),children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-50 text-indigo-500 rounded-full flex items-center justify-center overflow-hidden font-bold",children:e.photo?(0,a.jsx)("img",{src:S.B.getAbsoluteUrl(e.photo),className:"w-full h-full object-cover",onError:s=>{s.currentTarget.src="https://api.dicebear.com/7.x/initials/svg?seed=".concat(e.fullName)}}):e.fullName.charAt(0)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-bold text-sm group-hover:text-indigo-600 transition-colors",children:e.fullName}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-500",children:[e.role.toUpperCase()," • ",e.filiere," • ",e.niveau]})]}),(0,a.jsxs)("div",{className:"flex gap-1",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{onClick:()=>{_(e),F(!0)},className:"text-orange-500 p-2 hover:bg-orange-50 rounded-xl",children:(0,a.jsx)(j,{size:16})}),(0,a.jsx)("button",{onClick:()=>ec(e.id),className:"text-red-500 p-2 hover:bg-red-50 rounded-xl",children:(0,a.jsx)(v.A,{size:16})})]})]},s))})]}),"ai_config"===t&&(0,a.jsx)(T,{onBack:()=>u("dashboard")}),"communication"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(L.z,{title:e("communication"),onBack:()=>u("dashboard")}),(0,a.jsxs)("form",{onSubmit:eh,className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-sm space-y-4",children:[(0,a.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest text-indigo-600",children:"Nouvelle Annonce"}),(0,a.jsx)("input",{name:"title",required:!0,className:"w-full bg-gray-50 rounded-xl p-3 outline-none font-bold text-sm",placeholder:"Titre de l'annonce"}),(0,a.jsx)("textarea",{name:"message",required:!0,className:"w-full bg-gray-50 rounded-xl p-3 outline-none min-h-[100px] text-sm",placeholder:"Contenu du message..."}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-2xl space-y-4",children:[(0,a.jsx)("p",{className:"text-[10px] font-black uppercase text-gray-400",children:"Ciblage de l'audience"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Campuses"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:E.ov.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>ep.includes(e)?em(ep.filter(s=>s!==e)):em([...ep,e]),className:(0,M.cn)("px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all",ep.includes(e)?"bg-orange-500 text-white":"bg-white text-gray-400 border border-gray-100"),children:e},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Fili\xe8res"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-2 bg-white rounded-xl border border-gray-100",children:E.CG.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>ex.includes(e)?eu(ex.filter(s=>s!==e)):eu([...ex,e]),className:(0,M.cn)("px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all mb-1",ex.includes(e)?"bg-orange-500 text-white":"bg-gray-50 text-gray-400 border border-gray-100"),children:e},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Niveau"}),(0,a.jsxs)("select",{name:"niveau",className:"w-full p-2 bg-white border border-gray-100 rounded-lg text-xs font-bold",children:[(0,a.jsx)("option",{children:"Tous"}),(0,a.jsx)("option",{children:"L1"}),(0,a.jsx)("option",{children:"L2"}),(0,a.jsx)("option",{children:"L3"}),(0,a.jsx)("option",{children:"M1"}),(0,a.jsx)("option",{children:"M2"})]})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-orange-500 text-white py-4 rounded-xl font-black uppercase tracking-widest shadow-lg shadow-orange-100 active:scale-95 transition-all",children:"Diffuser l'annonce"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest text-gray-400 px-2",children:"Historique des annonces"}),H.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 flex items-center justify-between shadow-sm",children:[(0,a.jsxs)("div",{className:"flex-1 pr-4",children:[(0,a.jsx)("h4",{className:"font-bold text-xs uppercase mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500 line-clamp-2",children:e.message}),(0,a.jsx)("p",{className:"text-[8px] font-bold text-gray-400 mt-1",children:new Date(e.date).toLocaleDateString()})]}),(0,a.jsx)("button",{onClick:()=>{confirm("Supprimer cette annonce ?")&&(S.B.deleteAnnouncement(e.id),z.o.success("Annonce supprim\xe9e"))},className:"p-2 text-red-500 bg-red-50 rounded-lg active:scale-95 transition-all",children:(0,a.jsx)(v.A,{size:16})})]},s)),0===H.length&&(0,a.jsx)("p",{className:"text-center py-10 text-[10px] font-bold text-gray-400 uppercase",children:"Aucune annonce diffus\xe9e"})]})]}),"academic"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(L.z,{title:"Gestion Acad\xe9mique",onBack:()=>u("dashboard")}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-5 rounded-3xl border border-gray-100",children:[(0,a.jsxs)("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(x.A,{size:18,className:"text-emerald-500"})," Le\xe7ons (",U.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:U.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-xl flex items-center justify-between shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xs font-black uppercase text-gray-800",children:e.title}),(0,a.jsxs)("span",{className:"text-[9px] font-bold text-gray-400",children:[e.subject," • ",e.niveau]})]}),(0,a.jsx)("button",{onClick:()=>{confirm("Supprimer ?")&&S.B.deleteLesson(e.id)},className:"text-red-500 p-2",children:(0,a.jsx)(v.A,{size:14})})]},s))})]}),(0,a.jsxs)("div",{className:"bg-white p-5 rounded-3xl border border-gray-100",children:[(0,a.jsxs)("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(n.A,{size:18,className:"text-orange-500"})," Devoirs (",V.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:V.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-xl flex items-center justify-between shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xs font-black uppercase text-gray-800",children:e.title}),(0,a.jsxs)("span",{className:"text-[9px] font-bold text-gray-400",children:["Deadline: ",e.deadline]})]}),(0,a.jsx)("button",{onClick:()=>{confirm("Supprimer ?")&&S.B.deleteAssignment(e.id)},className:"text-red-500 p-2",children:(0,a.jsx)(v.A,{size:14})})]},s))})]})]})]}),"schedule"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(L.z,{title:"Emploi du temps",onBack:()=>u("dashboard")}),(0,a.jsx)(q,{campuses:E.ov,onSave:e=>{S.B.addSchedule(e),z.o.success("Emploi du temps mis \xe0 jour !"),u("dashboard")}}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest text-gray-400 px-2",children:"Emplois du temps actifs"}),K.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 flex items-center justify-between shadow-sm",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h4",{className:"font-bold text-xs uppercase mb-1",children:[e.campus," — ",e.niveau]}),(0,a.jsxs)("p",{className:"text-[8px] font-bold text-gray-400",children:["Mis \xe0 jour: ",new Date(e.lastUpdated).toLocaleString()]})]}),(0,a.jsx)("button",{onClick:async()=>{if(confirm("Supprimer cet emploi du temps ?")){let s=e._id||e.id;await S.B.deleteSchedule(s),z.o.success("Supprim\xe9");let t=S.B.getCache("schedules")||{};delete t["".concat(e.campus,"_").concat(e.niveau)],X(Object.values(t))}},className:"p-2 text-red-500 bg-red-50 rounded-lg",children:(0,a.jsx)(v.A,{size:16})})]},s)),0===K.length&&(0,a.jsx)("p",{className:"text-center py-10 text-[10px] font-bold text-gray-400 uppercase",children:"Aucun emploi du temps"})]})]}),"submissions"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(L.z,{title:"Devoirs Re\xe7us",onBack:()=>u("dashboard")}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-3xl border border-gray-100 shadow-sm space-y-3",children:[(0,a.jsx)("p",{className:"text-[10px] font-black uppercase text-gray-400",children:"Filtrer par destination"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("select",{value:el,onChange:e=>er(e.target.value),className:"p-3 bg-gray-50 rounded-xl text-[10px] font-bold outline-none",children:[(0,a.jsx)("option",{value:"",children:"Tous les Campus"}),E.ov.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:ed,onChange:e=>eo(e.target.value),className:"p-3 bg-gray-50 rounded-xl text-[10px] font-bold outline-none",children:[(0,a.jsx)("option",{value:"",children:"Tous les Niveaux"}),["L1","L2","L3","M1","M2"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("select",{value:ei,onChange:e=>en(e.target.value),className:"w-full p-3 bg-gray-50 rounded-xl text-[10px] font-bold outline-none",children:[(0,a.jsx)("option",{value:"",children:"Toutes les Fili\xe8res"}),E.CG.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[Q.filter(e=>{let s=k.find(s=>s.id===e.studentId);return(!el||(null==s?void 0:s.campus)===el)&&(!ei||(null==s?void 0:s.filiere)===ei)&&(!ed||(null==s?void 0:s.niveau)===ed)}).map((e,s)=>{let t=V.find(s=>s.id===e.assignmentId);return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-sm space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-black text-xs uppercase text-indigo-600 mb-1",children:e.studentName}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:(null==t?void 0:t.title)||"Devoir Inconnu"})]}),(0,a.jsx)("span",{className:"text-[9px] font-black text-gray-300 uppercase",children:new Date(e.date).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{e.file.startsWith("http")||e.file.startsWith("/")||e.file.startsWith("files/")?S.B.openPackFile(e.id,e.file):alert("Travail \xe9crit : \n\n".concat(e.file))},className:"flex-1 bg-gray-50 py-3 rounded-xl text-[10px] font-black uppercase flex items-center justify-center gap-2",children:[(0,a.jsx)(n.A,{size:14})," Voir le travail"]}),(0,a.jsx)("div",{className:(0,M.cn)("px-4 py-3 rounded-xl text-[10px] font-black uppercase flex-1 flex items-center justify-center",void 0!==e.score?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-gray-50 text-gray-400"),children:void 0!==e.score?"Note: ".concat(e.score,"/20"):"Non not\xe9"})]}),e.feedback&&(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[(0,a.jsx)("p",{className:"text-[8px] font-black uppercase text-gray-400 mb-1",children:"Commentaire Prof :"}),(0,a.jsxs)("p",{className:"text-[10px] font-medium text-gray-600 italic",children:['"',e.feedback,'"']})]})]},s)}),0===Q.length&&(0,a.jsx)("p",{className:"text-center py-20 text-[10px] font-bold text-gray-300 uppercase italic",children:"Aucun devoir rendu trouv\xe9"})]})]}),"media"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(L.z,{title:"M\xe9diath\xe8que GSI",onBack:()=>u("dashboard")}),(0,a.jsx)("div",{className:"bg-white rounded-[32px] overflow-hidden border border-gray-100 shadow-sm h-[600px]",children:(0,a.jsx)("iframe",{src:"https://groupegsi.mg/rtmggmg/embed/gallery?category=application",width:"100%",height:"100%",frameBorder:"0"})})]}),"stats"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(L.z,{title:"Stats & Rapports",onBack:()=>u("dashboard")}),(0,a.jsxs)("div",{className:"bg-indigo-600 p-8 rounded-[40px] text-white shadow-xl relative overflow-hidden",children:[(0,a.jsx)(y.A,{className:"absolute right-[-10px] top-[-10px] w-32 h-32 opacity-10"}),(0,a.jsx)("p",{className:"text-xs font-bold uppercase opacity-60 mb-1",children:"Croissance Annuelle"}),(0,a.jsx)("h2",{className:"text-3xl font-black mb-4",children:"+24.5%"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>z.o.success("Export PDF lanc\xe9 pour tous les campus"),className:"px-4 py-2 bg-white/20 rounded-xl text-[10px] font-bold active:scale-95 transition-all",children:"PDF REPORT"}),(0,a.jsx)("button",{onClick:()=>z.o.success("Export Excel lanc\xe9 (Global GSI)"),className:"px-4 py-2 bg-white/20 rounded-xl text-[10px] font-bold active:scale-95 transition-all",children:"EXCEL DATA"})]})]})]})]}),O&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[110] flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in duration-300",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-md rounded-t-[40px] sm:rounded-[40px] overflow-hidden shadow-2xl relative animate-in slide-in-from-bottom-10 duration-300",children:[(0,a.jsxs)("div",{className:"bg-indigo-600 p-8 pt-12 text-white relative",children:[(0,a.jsx)("button",{onClick:()=>P(null),className:"absolute right-6 top-6 p-2 bg-white/10 rounded-2xl hover:bg-white/20 transition-colors",children:(0,a.jsx)(N.A,{size:20})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-[32px] border-4 border-white/20 overflow-hidden shadow-2xl bg-white/10 mb-4",children:(0,a.jsx)("img",{src:S.B.getAbsoluteUrl(O.photo)||"https://api.dicebear.com/7.x/initials/svg?seed=".concat(O.fullName),className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://api.dicebear.com/7.x/initials/svg?seed=".concat(O.fullName)}})}),(0,a.jsx)("h2",{className:"text-2xl font-black uppercase tracking-tight",children:O.fullName}),(0,a.jsx)("p",{className:"text-indigo-200 text-xs font-bold uppercase tracking-widest mt-1",children:O.role})]})]}),(0,a.jsxs)("div",{className:"p-8 space-y-6 max-h-[60vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-3xl border border-gray-100",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-gray-400 uppercase mb-1",children:"Matricule"}),(0,a.jsx)("p",{className:"text-sm font-black text-indigo-600",children:O.matricule||"N/A"})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-3xl border border-gray-100",children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-gray-400 uppercase mb-1",children:"Campus"}),(0,a.jsx)("p",{className:"text-sm font-black text-gray-800",children:O.campus||"N/A"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-3xl border border-gray-100",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white rounded-2xl flex items-center justify-center text-indigo-600 shadow-sm",children:(0,a.jsx)(j,{size:18})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Email Contact"}),(0,a.jsx)("p",{className:"text-xs font-bold text-gray-700",children:O.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-3xl border border-gray-100",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white rounded-2xl flex items-center justify-center text-purple-600 shadow-sm",children:(0,a.jsx)(o.A,{size:18})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Cursus Acad\xe9mique"}),(0,a.jsxs)("p",{className:"text-xs font-bold text-gray-700",children:[O.filiere," — ",O.niveau]})]})]})]}),"student"===O.role&&(0,a.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,a.jsxs)("button",{onClick:()=>{_(O),P(null),F(!0)},className:"w-full bg-orange-500 text-white py-4 rounded-2xl font-black uppercase tracking-widest shadow-lg shadow-orange-100 active:scale-95 transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(j,{size:18}),"Convoquer l'\xe9tudiant"]})})]}),(0,a.jsx)("div",{className:"h-4 bg-gray-50"})]})}),G&&I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-sm rounded-[32px] p-8 shadow-2xl relative",children:[(0,a.jsx)("button",{onClick:()=>F(!1),className:"absolute right-6 top-6 text-gray-400",children:(0,a.jsx)(N.A,{size:20})}),(0,a.jsx)("h2",{className:"text-xl font-black mb-2",children:e("convocation")}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mb-6 font-medium",children:["Convoquer ",(0,a.jsx)("span",{className:"text-indigo-600 font-bold",children:I.fullName}),"."]}),(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),S.B.addAnnouncement({id:Math.random().toString(36).substr(2,9),title:"CONVOCATION OFFICIELLE",message:"Vous \xeates convoqu\xe9(e) le ".concat(e.target.date.value," pour : ").concat(e.target.motive.value,"."),date:new Date().toISOString(),author:"Direction GSI",type:"convocation",targetUserId:I.id}),z.o.success("Convocation envoy\xe9e"),F(!1)},className:"space-y-4",children:[(0,a.jsx)("textarea",{name:"motive",required:!0,className:"w-full bg-gray-50 border-none rounded-2xl p-4 text-sm font-bold outline-none min-h-[100px]",placeholder:"Motif..."}),(0,a.jsx)("input",{name:"date",required:!0,type:"datetime-local",className:"w-full bg-gray-50 border-none rounded-2xl p-4 text-sm font-bold outline-none"}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-4 rounded-2xl font-black uppercase tracking-widest active:scale-95",children:"Envoyer"})]})]})}),(0,a.jsx)("button",{onClick:()=>s.push("/register"),className:"fixed bottom-6 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-xl flex items-center justify-center active:scale-90 transition-all z-50",children:(0,a.jsx)(w.A,{size:28})})]})}let D=(0,l.memo)(e=>{let{label:s,value:t,change:l,color:r}=e;return(0,a.jsxs)("div",{className:"bg-white p-5 rounded-[32px] shadow-sm border border-gray-100",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:s}),(0,a.jsx)("p",{className:"text-xl font-black ".concat(r),children:t}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-emerald-500 mt-1",children:l})]})});function T(e){let{onBack:s}=e,[t,r]=(0,l.useState)(S.B.getAIConfig()),[i,n]=(0,l.useState)(E.ov[0]),[d,o]=(0,l.useState)("G\xe9n\xe9ral"),c="".concat(i,"_").concat(d),x=t.prompts[c]||"",u=async()=>{await S.B.updateAIConfig(t),z.o.success("Configuration IA enregistr\xe9e !")};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(L.z,{title:"Configuration IA",onBack:s}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-xl space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-black uppercase text-gray-400 ml-2",children:"Cl\xe9 API OpenAI"}),(0,a.jsx)("input",{type:"password",value:t.apiKey,onChange:e=>r({...t,apiKey:e.target.value}),placeholder:"sk-...",className:"w-full bg-gray-50 p-4 rounded-2xl text-xs font-bold outline-none border-2 border-transparent focus:border-black transition-all"})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100 space-y-4",children:[(0,a.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest text-indigo-600",children:"Prompts Personnalis\xe9s"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("select",{value:i,onChange:e=>n(e.target.value),className:"p-3 bg-gray-50 rounded-xl text-[10px] font-bold outline-none",children:E.ov.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"p-3 bg-gray-50 rounded-xl text-[10px] font-bold outline-none",children:[(0,a.jsx)("option",{value:"G\xe9n\xe9ral",children:"G\xe9n\xe9ral"}),E.CG.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[9px] font-black uppercase text-gray-400 ml-1",children:["Instruction Syst\xe8me (",i," - ",d,")"]}),(0,a.jsx)("textarea",{value:x,onChange:e=>{let s={...t.prompts,[c]:e.target.value};r({...t,prompts:s})},placeholder:"Tu es Insight, un assistant sp\xe9cialis\xe9 pour le campus...",className:"w-full bg-gray-50 p-4 rounded-2xl text-xs font-medium outline-none min-h-[200px] border-2 border-transparent focus:border-indigo-500 transition-all"})]})]}),(0,a.jsx)("button",{onClick:u,className:"w-full bg-black text-white py-5 rounded-2xl font-black uppercase tracking-widest shadow-xl active:scale-95 transition-all",children:"Sauvegarder Configuration"})]})]})}function q(e){let{campuses:s,onSave:t}=e,[r,i]=(0,l.useState)(s[0]),[n,d]=(0,l.useState)("L1"),[o,c]=(0,l.useState)([]),x=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-[32px] border border-gray-100 shadow-xl space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-bold",children:"Configuration"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"file",id:"excel-schedule",className:"hidden",accept:".xlsx, .xls, .csv",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(!t)return;let a=new FileReader;a.onload=e=>{var s;let t=null==(s=e.target)?void 0:s.result,a=B.LF(t,{type:"binary"}),l=a.SheetNames[0],r=a.Sheets[l],i=B.Wp.sheet_to_json(r).map(e=>{let s={};Object.keys(e).forEach(t=>{s[t.toLowerCase().replace(/\s/g,"")]=e[t]});let t=s.debut||s.start||"08:00",a=s.fin||s.end||"10:00",l=s.heure||s.time||s.creneau;if(l&&"string"==typeof l){let e=l.split(/[-–—/]/);2===e.length&&(t=e[0].trim().replace("h",":").replace(/[^0-9:]/g,""),a=e[1].trim().replace("h",":").replace(/[^0-9:]/g,""),t.includes(":")||(t+=":00"),a.includes(":")||(a+=":00"),4===t.length&&1===t.indexOf(":")&&(t="0"+t),4===a.length&&1===a.indexOf(":")&&(a="0"+a))}let r=s.jour||s.day||"Lundi",i=r.toLowerCase();return i.includes("lun")?r="Lundi":i.includes("mar")?r="Mardi":i.includes("mer")?r="Mercredi":i.includes("jeu")?r="Jeudi":i.includes("ven")?r="Vendredi":i.includes("sam")?r="Samedi":i.includes("dim")&&(r="Dimanche"),{day:r,startTime:t,endTime:a,subject:s.matiere||s.subject||s.cours||"",room:s.salle||s.room||s.classe||"",instructor:s.professeur||s.instructor||s.prof||""}});c([...o,...i]),z.o.success("".concat(i.length," cr\xe9neaux import\xe9s avec succ\xe8s !"))},a.readAsBinaryString(t)}}),(0,a.jsxs)("button",{onClick:()=>{var e;return null==(e=document.getElementById("excel-schedule"))?void 0:e.click()},className:"flex items-center gap-1.5 px-3 py-1.5 bg-emerald-50 text-emerald-600 border border-emerald-100 rounded-xl text-[10px] font-black uppercase active:scale-95 transition-all",children:[(0,a.jsx)(k.A,{size:14}),"Import Excel"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("select",{value:r,onChange:e=>i(e.target.value),className:"p-4 bg-gray-50 rounded-2xl font-bold text-xs border-none outline-none",children:s.map(e=>(0,a.jsx)("option",{children:e},e))}),(0,a.jsx)("select",{value:n,onChange:e=>d(e.target.value),className:"p-4 bg-gray-50 rounded-2xl font-bold text-xs border-none outline-none",children:["L1","L2","L3","M1","M2"].map(e=>(0,a.jsx)("option",{children:e},e))})]}),(0,a.jsxs)("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:[o.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-2xl border border-gray-100 relative group animate-in slide-in-from-right-2",children:[(0,a.jsx)("button",{onClick:()=>c(o.filter((e,t)=>t!==s)),className:"absolute -top-2 -right-2 bg-red-500 text-white p-1.5 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(N.A,{size:12})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,a.jsx)("select",{value:e.day,onChange:e=>{let t=[...o];t[s].day=e.target.value,c(t)},className:"p-2 bg-white rounded-lg text-[10px] font-bold",children:x.map(e=>(0,a.jsx)("option",{children:e},e))}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("input",{type:"time",value:e.startTime,onChange:e=>{let t=[...o];t[s].startTime=e.target.value,c(t)},className:"flex-1 p-2 bg-white rounded-lg text-[10px] font-bold"}),(0,a.jsx)("input",{type:"time",value:e.endTime,onChange:e=>{let t=[...o];t[s].endTime=e.target.value,c(t)},className:"flex-1 p-2 bg-white rounded-lg text-[10px] font-bold"})]})]}),(0,a.jsx)("input",{placeholder:"Mati\xe8re",value:e.subject,onChange:e=>{let t=[...o];t[s].subject=e.target.value,c(t)},className:"w-full p-3 bg-white rounded-xl text-xs font-bold mb-2 outline-none"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("input",{placeholder:"Salle",value:e.room,onChange:e=>{let t=[...o];t[s].room=e.target.value,c(t)},className:"p-3 bg-white rounded-xl text-[10px] font-bold outline-none"}),(0,a.jsx)("input",{placeholder:"Professeur",value:e.instructor,onChange:e=>{let t=[...o];t[s].instructor=e.target.value,c(t)},className:"p-3 bg-white rounded-xl text-[10px] font-bold outline-none"})]})]},s)),0===o.length&&(0,a.jsx)("p",{className:"text-center py-10 text-[10px] font-bold text-gray-300 uppercase italic",children:"Aucun cr\xe9neau ajout\xe9"})]}),(0,a.jsxs)("button",{onClick:()=>{c([...o,{day:"Lundi",startTime:"08:00",endTime:"10:00",subject:"",room:"",instructor:""}])},className:"w-full flex items-center justify-center gap-2 py-3 border-2 border-dashed border-indigo-100 text-indigo-400 rounded-2xl text-[10px] font-black uppercase hover:bg-indigo-50 transition-all",children:[(0,a.jsx)(w.A,{size:16})," Ajouter un cr\xe9neau"]}),(0,a.jsx)("button",{onClick:()=>t({id:Math.random().toString(36).substr(2,9),campus:r,niveau:n,lastUpdated:new Date().toISOString(),slots:o}),className:"w-full bg-indigo-600 text-white py-5 rounded-2xl font-black uppercase tracking-widest shadow-xl shadow-indigo-100 active:scale-95 transition-all",children:"Enregistrer le tableau"})]})}},26615:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},32265:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73650:(e,s,t)=>{Promise.resolve().then(t.bind(t,22080))},90109:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},94374:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}},e=>{e.O(0,[524,233,909,497,149,441,493,358],()=>e(e.s=73650)),_N_E=e.O()}]);